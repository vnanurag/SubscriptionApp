(this["webpackJsonpsubscription-app"]=this["webpackJsonpsubscription-app"]||[]).push([[0],{29:function(e,a,t){e.exports=t(45)},34:function(e,a,t){},35:function(e,a){},44:function(e,a,t){},45:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(18),o=t.n(s),c=(t(34),t(12)),l=t(13),i=t(16),u=t(14),p=t(6),d=t(15),h=t(5),m=t(20),v=(t(35),function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(i.a)(this,Object(u.a)(a).call(this,e))).handlePlanChange=function(e){var a=Object.keys(t.props.plans).find((function(a){if(e.target.value===t.props.plans[a])return a}));t.setState({inputChanged:!0,planName:a});var n={data:{plan:a,seats:t.state.seats}};t.props.handlePlanChange(n)},t.handleSeatsChange=function(e){if(isNaN(parseInt(e.target.value))||parseInt(e.target.value)<0)t.setState({inputChanged:!1});else{t.setState({inputChanged:!0,seats:e.target.value});var a={data:{plan:t.state.planName,seats:e.target.value}};t.props.handleSeatsChange(a)}},t.update=function(){var e={data:{plan:t.state.planName,seats:t.state.seats}};t.props.update(e)},t.state={inputChanged:!1,planName:t.props.store.plan,seats:t.props.store.seats,cost:t.props.store.cost,prevData:{}},t.handlePlanChange=t.handlePlanChange.bind(Object(p.a)(t)),t.handleSeatsChange=t.handleSeatsChange.bind(Object(p.a)(t)),t}return Object(d.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({prevData:this.props.store})}},{key:"componentWillUnmount",value:function(){var e=this.state.prevData;this.props.handlePrevData(e)}},{key:"render",value:function(){var e=this;return r.a.createElement(h.a,{id:"subscription"},r.a.createElement("h2",null,"Subscription"),r.a.createElement("div",{className:"product"},r.a.createElement(h.a.Group,{className:"edit-plan"},r.a.createElement(h.a.Control,{id:"plan-dropdown",as:"select",defaultValue:this.props.store.name,onChange:this.handlePlanChange},Object.keys(this.props.plans).map((function(a,t){return r.a.createElement("option",{key:t},e.props.plans[a])}))),r.a.createElement(h.a.Label,null,"Plan")),r.a.createElement(h.a.Group,{className:"edit-seats"},r.a.createElement(h.a.Control,{id:"seatsInput",as:"input",defaultValue:this.props.store.seats,onChange:this.handleSeatsChange}),r.a.createElement(h.a.Label,null,"Seats")),r.a.createElement(h.a.Group,{className:"price"},r.a.createElement("div",{id:"price-value",value:this.props.store.cost},"$",this.props.store.cost),r.a.createElement(h.a.Label,{className:"label"},"Price"))),r.a.createElement(m.a,{id:"submit-button",variant:this.state.inputChanged?"primary":"secondary",disabled:!this.state.inputChanged,onClick:this.update},"Update Subscription"))}}]),a}(r.a.Component)),E=t(17),b=t(10),S=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).back=function(){t.props.back()},t}return Object(d.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(h.a,{id:"overview"},r.a.createElement(b.a,{className:"row"},r.a.createElement(E.a,{className:"subscription-overview"},r.a.createElement("h4",null,"Previous Subscription"),r.a.createElement(b.a,null,r.a.createElement(h.a.Label,{className:"old-label"},"Plan"),r.a.createElement("div",{className:"old-value"},this.props.store.prevData.name)),r.a.createElement(b.a,null,r.a.createElement(h.a.Label,{className:"old-label"},"Seats"),r.a.createElement("div",{className:"old-value"},this.props.store.prevData.seats)),r.a.createElement(b.a,null,r.a.createElement(h.a.Label,{className:"old-label"},"Price"),r.a.createElement("div",{className:"old-value"},"$",this.props.store.prevData.cost))),r.a.createElement(E.a,{className:"subscription-overview"},r.a.createElement("h4",null,"Updated Subscription"),r.a.createElement(b.a,null,r.a.createElement(h.a.Label,{className:"new-label"},"Plan"),r.a.createElement("div",{className:"new-value"},this.props.store.name)),r.a.createElement(b.a,null,r.a.createElement(h.a.Label,{className:"new-label"},"Seats"),r.a.createElement("div",{className:"new-value"},this.props.store.seats)),r.a.createElement(b.a,null,r.a.createElement(h.a.Label,{className:"new-label"},"Price"),r.a.createElement("div",{className:"new-value"},"$",this.props.store.cost)))),r.a.createElement(m.a,{id:"back-button",variant:"primary",onClick:this.back},"Back"))}}]),a}(r.a.Component),C={basic:1,good:10,better:100,best:1e3},f={basic:"Basic",good:"Good",better:"Better",best:"Best"},g={plan:"good",name:"Good",seats:5,cost:50},N=function(e){var a={plan:e.data.plan,name:f[e.data.plan],seats:e.data.seats,cost:e.data.seats*C[e.data.plan]};return g,g=a,new Promise((function(e,t){e(a)}))},y=t(19),A=t(8),O={plan:"",name:"",seats:0,cost:0,overview:!1,prevData:{},errorMessage:""},P=function(){return function(e){return new Promise((function(e,a){e(g)})).then((function(a){return e({type:"GET_DATA_SUCCESS",payload:a})})).catch((function(a){return e({type:"GET_DATA_FAILURE",payload:a})}))}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"INITIAL_STATE":return{state:e};case"GET_DATA_SUCCESS":var t=a.payload;return e=t;case"GET_DATA_FAILURE":var n=a.payload;return Object(A.a)({},e,{overview:!1,errorMessage:n});case"PLAN_CHANGE_SUCCESS":var r=a.payload;return Object(A.a)({},e,{plan:r.plan,name:r.name,seats:r.seats,cost:r.cost});case"PLAN_CHANGE_FAILURE":var s=a.payload;return Object(A.a)({},e,{errorMessage:s});case"SEATS_CHANGE_SUCCESS":var o=a.payload;return Object(A.a)({},e,{plan:o.plan,name:o.name,seats:o.seats,cost:o.cost});case"SEATS_CHANGE_FAILURE":var c=a.payload;return Object(A.a)({},e,{errorMessage:c});case"UPDATE_SUBSCRIPTION_SUCCESS":var l=a.payload;return Object(A.a)({},e,{plan:l.plan,name:l.name,seats:l.seats,cost:l.cost,overview:!0,prevData:{}});case"UPDATE_SUBSCRIPTION_FAILURE":var i=a.payload;return Object(A.a)({},e,{overview:!1,errorMessage:i});case"NAVIGATING_BACK_SUCCESS":return Object(A.a)({},e,{overview:!1});case"PREVIOUS_SUBSCRIPTION_SUCCESS":var u=a.payload;return Object(A.a)({},e,{prevData:u});default:return e}},_=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(i.a)(this,Object(u.a)(a).call(this,e))).onPlanChange=function(e){t.props.onPlanChange(e)},t.onSeatsChange=function(e){t.props.onSeatsChange(e)},t.onUpdate=function(e){t.props.onUpdate(e)},t.onBack=function(){t.props.onBack()},t.onHandlePrevData=function(e){t.props.onHandlePrevData(e)},t.state={loading:!0,error:"",prevData:{}},t.onPlanChange=t.onPlanChange.bind(Object(p.a)(t)),t.onSeatsChange=t.onSeatsChange.bind(Object(p.a)(t)),t.onUpdate=t.onUpdate.bind(Object(p.a)(t)),t.onBack=t.onBack.bind(Object(p.a)(t)),t.onHandlePrevData=t.onHandlePrevData.bind(Object(p.a)(t)),t}return Object(d.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.getData().then((function(){e.setState({loading:!1})}))}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.loading?r.a.createElement("div",{className:"loading"},"Loading..."):r.a.createElement("div",null,this.props.store.overview?r.a.createElement(S,{store:this.props.store,back:this.onBack}):r.a.createElement(v,{store:this.props.store,plans:f,costs:C,handlePlanChange:this.onPlanChange,handleSeatsChange:this.onSeatsChange,handlePrevData:this.onHandlePrevData,update:this.onUpdate})))}}]),a}(r.a.Component),j=Object(y.b)((function(e){return{store:e.subscriptionReducer}}),(function(e){return{getData:function(){return e(P())},onPlanChange:function(a){return e(function(e){return function(a){return N(e).then((function(e){return a(function(e){return{type:"PLAN_CHANGE_SUCCESS",payload:e}}(e))})).catch((function(e){return a(function(e){return{type:"PLAN_CHANGE_FAILURE",payload:e}}(e))}))}}(a))},onSeatsChange:function(a){return e(function(e){return function(a){return N(e).then((function(e){return a(function(e){return{type:"SEATS_CHANGE_SUCCESS",payload:e}}(e))})).catch((function(e){return a(function(e){return{type:"SEATS_CHANGE_FAILURE",payload:e}}(e))}))}}(a))},onUpdate:function(a){return e(function(e){return function(a){return N(e).then((function(e){return a(function(e){return{type:"UPDATE_SUBSCRIPTION_SUCCESS",payload:e}}(e))})).catch((function(e){return a(function(e){return{type:"UPDATE_SUBSCRIPTION_FAILURE",payload:e}}(e))}))}}(a))},onBack:function(){return e((function(e){e({type:"NAVIGATING_BACK_SUCCESS",payload:{}})}))},onHandlePrevData:function(a){return e(function(e){return function(a){a(function(e){return{type:"PREVIOUS_SUBSCRIPTION_SUCCESS",payload:e}}(e))}}(a))}}}))(_);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(43),t(44);var I=t(11),D=t(28),w=Object(I.c)({subscriptionReducer:U}),k=function(){return Object(I.d)(w,Object(I.a)(D.a))};o.a.render(r.a.createElement(y.a,{store:k()},r.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[29,1,2]]]);
//# sourceMappingURL=main.bd72a447.chunk.js.map